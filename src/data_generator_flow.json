[{"id":"6e82cb32.1c8a24","type":"function","z":"d387a653.397118","name":"GENERATE","func":"var water_reading = 25+Math.floor(Math.random() * 150);\n\nvar fecha = new Date();\n//var epoch = fecha.getTime();\nvar date = fecha.getFullYear() + '-' + (fecha.getMonth()+1) + '-' + fecha.getDate();\nvar time = fecha.getHours() + ':' + fecha.getMinutes() + ':' + fecha.getSeconds();\nvar timestamp = date + ' ' + time;\n\nvar slave = msg.payload;\nvar master = msg.topic;\n\nvar newMsg = {\n    payload: [\n        {\n        query: `INSERT INTO logs(datetime,slave_name,master_name,district_name,water_amount)\n                VALUES(\\'${timestamp}\\',\\'${slave}\\',\\'${master}\\','District3',${water_reading})`,\n        output: true,\n        },\n    ]\n};\n\nreturn newMsg;\n\n/*\n    {\n        query: `INSERT INTO logs(metric1,value_int,time_epoch,time_date_time,time_time_stamp) \n            VALUES ('temperatura',${temp},${epoch},\\'${timestamp}\\',\\'${timestamp}\\');`,\n        output: true,\n    },\n    {\n        query: `INSERT INTO test_data(metric1,value_int,time_epoch,time_date_time,time_time_stamp)  \n            VALUES ('humedad',${hum},${epoch},\\'${timestamp}\\',\\'${timestamp}\\');`,\n        output: true,\n    },\n    {\n        query: `INSERT INTO test_data(metric1,value_int,time_epoch,time_date_time,time_time_stamp)  \n            VALUES ('presion',${pres},${epoch},\\'${timestamp}\\',\\'${timestamp}\\');`,\n        output: true,\n\n*/","outputs":1,"noerr":0,"x":328,"y":794,"wires":[["d2de6056.8bbe2","d7af6d67.09ced"]]}]